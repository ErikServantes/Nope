<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Carregar CSVs do Sistema Solar</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .file-input { margin-bottom: 20px; }
    label { display: block; margin-bottom: 5px; }
    .preview { margin-top: 10px; background: #f2f2f2; padding: 10px; max-height: 150px; overflow-y: auto; }
  </style>
</head>
<body>
  <h1>Importar Dados do Sistema Solar</h1>
  
  <!-- Input para o arquivo do Universo / Sistemas Solares -->
  <div class="file-input">
    <label for="solarSystemsFile">SolarSystems.csv:</label>
    <input type="file" id="solarSystemsFile" accept=".csv">
    <div id="solarSystemsPreview" class="preview"></div>
  </div>
  
  <!-- Input para o arquivo de Planetas -->
  <div class="file-input">
    <label for="planetsFile">Planets.csv:</label>
    <input type="file" id="planetsFile" accept=".csv">
    <div id="planetsPreview" class="preview"></div>
  </div>
  
  <!-- Input para o arquivo de Luas -->
  <div class="file-input">
    <label for="moonsFile">Moons.csv:</label>
    <input type="file" id="moonsFile" accept=".csv">
    <div id="moonsPreview" class="preview"></div>
  </div>
  
  <button id="importData">Importar Dados</button>
  
  <script>
    // Variáveis para armazenar os dados dos CSVs
    let solarSystemsData, planetsData, moonsData;

    // Função para processar um arquivo CSV e exibir uma pré-visualização
    function processCSV(fileInput, previewElement, callback) {
      const file = fileInput.files[0];
      if (file) {
        Papa.parse(file, {
          header: true,
          complete: function(results) {
            // Armazena os dados e mostra uma pré-visualização simples
            callback(results.data);
            previewElement.innerHTML = JSON.stringify(results.data.slice(0, 3), null, 2) + '<br><small>... (pré-visualização)</small>';
          },
          error: function(error) {
            previewElement.innerHTML = 'Erro ao carregar o arquivo: ' + error;
          }
        });
      } else {
        previewElement.innerHTML = 'Nenhum arquivo selecionado.';
      }
    }

    // Seleciona os elementos de input e preview
    const solarSystemsFileInput = document.getElementById('solarSystemsFile');
    const planetsFileInput = document.getElementById('planetsFile');
    const moonsFileInput = document.getElementById('moonsFile');

    const solarSystemsPreview = document.getElementById('solarSystemsPreview');
    const planetsPreview = document.getElementById('planetsPreview');
    const moonsPreview = document.getElementById('moonsPreview');

    // Adiciona listeners para atualizar a pré-visualização ao selecionar um arquivo
    solarSystemsFileInput.addEventListener('change', () => {
      processCSV(solarSystemsFileInput, solarSystemsPreview, (data) => {
        solarSystemsData = data;
      });
    });
    planetsFileInput.addEventListener('change', () => {
      processCSV(planetsFileInput, planetsPreview, (data) => {
        planetsData = data;
      });
    });
    moonsFileInput.addEventListener('change', () => {
      processCSV(moonsFileInput, moonsPreview, (data) => {
        moonsData = data;
      });
    });

    // Botão para importar os dados
    document.getElementById('importData').addEventListener('click', () => {
      if (solarSystemsData && planetsData && moonsData) {
        // Aqui você pode integrar os dados à sua simulação,
        // criando os objetos e relacionando os planetas e luas conforme os IDs.
        console.log('Dados do Sistema Solar:', solarSystemsData);
        console.log('Dados dos Planetas:', planetsData);
        console.log('Dados das Luas:', moonsData);

        alert('Dados importados com sucesso!');
        // Exemplo: chamar uma função para atualizar a simulação com esses dados.
        // updateSimulation(solarSystemsData, planetsData, moonsData);
      } else {
        alert('Por favor, selecione os três arquivos CSV.');
      }
    });
  </script>
</body>
</html>
